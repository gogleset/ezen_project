<!-- 
@Filename: article.html
@Author: 임다정 (dazoo0221@gmail.com)
@description: article HTML
 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <title>Document</title>
    <!-- 웹폰트(한글) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <!-- 폰트어썸 -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <!-- sweetalert-->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- CSS 참조 -->
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/headerfooter.css">
    <link rel="stylesheet" href="../css/article.css">
</head>

<body>
    <!-- 전체 콘테이너입니다 -->
    <div class="container">
        <!-- 상단 헤더를 표시합니다 -->
        <header class="header clearfix">
            <a href="#">
                <!-- 상단 로고 부분입니다. -->
                <div class="header-icon pull-left">
                    <h1>logo</h1>
                </div>
            </a>
            <!-- 상단 탭 메뉴를 표시합니다 -->
            <a href="#">
                <div class="header-tab pull-right">
                    <i class="fas fa-bars"></i>
                </div>
            </a>
        </header>


        <!-- 내용부분입니다. -->
        <section class="content">
            <div class="title">
                <h1>나의 QnA</h1>
            </div>
            <hr>
            <div class="show-user"></div>
            <script id="tmpl-u" type="text/x-handlebars-template">
                    {{#each item}}
                    <dl id="user-article">
                        <dt>제목 :</dt>
                        <dd>{{title}}</dd>
                        <dt>내용 :</dt>
                        <dd>{{desc}}</dd>
                        <dt>날짜 :</dt>
                        <dd>{{regdate}}</dd>
                    </dl>
                    {{/each}}
                </script>
            <div class="btn-wrap clearfix">
                <button type="submit" class="btn-delete pull-right">삭제</button>
            </div>
            <hr>

            <div class="title">
                <h1>관리자 답변</h1>
            </div>

            <!-- 기본값은 default 이고, 관리자 답변이 있는 경우에만 노출되도록 설정 -->
            <div class="show-admin displaynone"></div>
            <script id="tmpl-a" type="text/x-handlebars-template">
                    {{#each item}}
                    <dl id="admin-article">
                        <dt>내용 :</dt>
                        <dd>{{desc}}</dd>
                        <dt>날짜 :</dt>
                        <dd>{{regdate}}</dd>
                    </dl>
                    {{/each}}
                </script>

            <!-- 관리자 답변이 없는 경우 띄울 이미지-->
            <div class="non-answer">
                <img src="../img/dessert39_simbol2.png" alt="">
                <span>확인 중..</span>
            </div>
        </section>


        <!-- 푸터부분입니다. -->
        <footer class="footer">
            <!-- 푸터 아이콘입니다 -->
            <div class="footer-icon">
            </div>
            <!-- 주소지 및 정보입니다. -->
            <p>Company/CEO | (주) 정임최인터내셔널/정임최</p>
            <address>Address | 서울특별시 강남구 w타워</address>
            <p>Customer Service | 0000-0000</p>
            <p>Business Lisense | 12312-123-12</p>

            <p class="contact">Contact us</p>
            <p>ezenprojectUS!@contacts.co.kr</p>
            <p class="copyright">Copyright &copy; 2021 Dessert40 all Right Reserved</p>
        </footer>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"
        integrity="sha256-ngJY93C4H39YbmrWhnLzSyiepRuQDVKDNCWO2iyMzFw=" crossorigin="anonymous"></script>
    <script>

        /*     DB에서 가지고 올 데이터를 실행할 로직
            (acync() => {
                try {
                    const data = await 
                }
                catch(e){
                    console.log(e);
                }
            }) */

        // 화면에 보여 줄 임의의 데이터
        const data = {
            item: [
                {
                    title: '배송문의',
                    desc: '배송은 언제되나요?',
                    regdate: '2022 - 01 - 20'
                }
            ]
        };

        const html = document.querySelector("#tmpl-u").innerText;
        const template = Handlebars.compile(html);

        const result = template(data);

        document.querySelector(".show-user").insertAdjacentHTML("beforeend", result);


        document.querySelector(".btn-delete").addEventListener("click", (e) => {

            Swal.fire({
                title: '정말로 삭제하시겠습니까?',
                text: "삭제된 내용은 복원할 수 없습니다.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.isConfirmed) {

                    //백엔드로 delete 보내는 로직 설계..
                    location.href = "./qa.html"  // 삭제 후 이전 페이지로 연결

                    Swal.fire(
                        'Deleted!',
                        'Your file has been deleted.',
                        'success'
                    )
                }
            })
        })

    </script>
</body>

</html>