<!--
    @Filename: product.html
    @Author: 정한슬 (seul5106@gmail.com)
    @description: 상품관리 페이지 html
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../../css/admin/layout.css">
    <link rel="stylesheet" href="../../css/admin/product.css">
</head>

<body>
    <!-- 헤더입니다. -->
    <div data-init="../inc/admin-header.html"></div>
    <!-- 서브 타이틀 영역입니다. -->
    <div class="container">
        <div class="content-header">
            <h3 class="content-title pull-left">상품관리</h3>
            <span class="content-sub-title pull-right">홈-상품관리</span>
        </div>
    </div>
    <!-- 검색과 삭제를 감싸는 영역입니다. -->
    <form class="container">
        <div class="setting-container">
            <div class="admin-box-setting">
                <select class="pull-left">
                    <option value="">전체분류</option>
                    <option value="">케이크</option>
                    <option value="">티라미슈</option>
                    <option value="">빙수</option>
                    <option value="">파르페</option>
                    <option value="">마카롱</option>
                    <option value="">오믈렛</option>
                    <option value="">쿠키</option>
                    <option value="">파이</option>
                    <option value="">베이커리</option>
                </select>
                <input type="text" class="form-control admin-searchbar pull-left" placeholder="검색">
                <button class="btn btn-primary pull-left btn-admin-setting" id="search" type="button">검색</button>
                <button class="btn btn-primary pull-right btn-admin-setting" id="delete" type="button">상품삭제</button>
                <a class="btn btn-primary pull-right btn-admin-setting" id="add" type="button"
                    href="productDetail.html">상품추가</a>
            </div>
        </div>
    </form>
    <!-- 데이터 테이블 영역입니다. -->
    <div class="container table-container">
        <table class="table table-bordered table-hover table-condensed table-striped text-center">
            <colgroup>
                <col width="1%">
                <col width="10%">
                <col width="20%">
                <col width="10%">
                <col width="20%">
                <col width="10%">
                <col width="10%">
            </colgroup>
            <thead>
                <tr>
                    <th><input type="checkbox" name="mycheckbox" id="checkAll" value="" /></th>
                    <th class="text-center">상품코드</th>
                    <th class="text-center">이미지</th>
                    <th class="text-center">분류</th>
                    <th class="text-center">상품명</th>
                    <th class="text-center">판매 가격</th>
                    <th class="text-center">재고</th>
                </tr>
            </thead>
            <tbody class="contents">

            </tbody>
        </table>
    </div>
    <!-- 페이지 네이션 영역입니다. -->
    <nav aria-label="Page navigation example">
        <ul class="pagination">

        </ul>
    </nav>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="../assets/layout.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../assets/pageHelper.js"></script>
    <script>
        // data 데이터입니다.
        let data = null;
        let pageData = null;

        (async () => {
            try {
                const result = await axios.get('/product');
                data = result.data.item
                pageData = result.data.pagenation
                console.log(data);

            } catch (error) {
                Swal.fire({
                    text: error,
                    icon: 'error',
                    confirmButtonText: '확인'
                });
            }
            // 가져온 데이터를 기반으로 동적으로 DOM을 생성합니다
            data.map((v, i) => {
                document.querySelector(".contents").innerHTML += `
                 <tr>
                    <td><input type="checkbox" name="mycheckbox" id="checkbox" value="${v.product_code}" /></td>
                    <td>${v.product_code}</td>
                    <td><img src="../../..${v.product_img}" class="img-responsive center-block"></td>
                    <td>${v.product_categorie}</td>
                    <td class="text-center">
                        <a href="./productDetail.html?prod=${v.product_code}" target="_blank">
                            ${v.product_name}
                            </a>
                            </td>
                    <td>${v.product_price}</td>
                    <td>${v.product_stock}</td>
                </tr>
                `
            })
            // 페이지 구현 함수입니다.
            pagenation(".pagination", pageData);
        })();


    </script>
</body>

</html>